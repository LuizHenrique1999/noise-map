map.flyTo([<%= @location.latitude %>, <%= @location.longitude %>], 18)

if(<%= @isComplaint %>){
  marker.setLatLng([<%= @location.latitude %>, <%= @location.longitude %>])

  if(!map.hasLayer(marker)){
    marker.addTo(map)
  }

  map.flyTo(marker.getLatLng(), 18)
  marker.openPopup()
  
  latitude_field.value = <%= @location.latitude %>
  longitude_field.value = <%= @location.longitude %>

  document.querySelector("#complaint_address_text_field").classList.remove('is-danger')
  message = document.querySelector("#complaint_invalid_address_message")
  message ? message.parentNode.removeChild(message) : ""
  message = document.querySelector("#complaint_invalid_coordinates_message")
  message ? message.parentNode.removeChild(message) : ""
}
else{
  document.querySelector("#search_address_text_field").classList.remove('is-danger')
  message = document.querySelector("#invalid_address_message")
  message ? message.parentNode.removeChild(message) : ""
}