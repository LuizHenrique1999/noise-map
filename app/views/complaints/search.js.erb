map.flyTo([<%= @coordinates[0] %>, <%= @coordinates[1] %>], 18)

if(<%= @isComplaint %>){
  marker.setLatLng([<%= @coordinates[0] %>, <%= @coordinates[1] %>])

  if(!map.hasLayer(marker)){
    marker.addTo(map)
  }

  map.flyTo(marker.getLatLng(), 18)
  marker.openPopup()
  
  latitude_field.value = <%= @coordinates[0] %> 
  longitude_field.value = <%= @coordinates[1] %>

  document.querySelector("#complaint_address_field").classList.remove('is-danger')
  message = document.querySelector("#complaint_invalid_address_message")
  message ? message.parentNode.removeChild(message) : ""
  message = document.querySelector("#complaint_invalid_coordinates_message")
  message ? message.parentNode.removeChild(message) : ""
}
else{
  document.querySelector("#search_address_field").classList.remove('is-danger')
  message = document.querySelector("#invalid_address_message")
  message ? message.parentNode.removeChild(message) : ""
}