if(map.hasLayer(marker)){
  map.removeLayer(marker)
}

var new_marker_latitude = <%= @marker.latitude %>
var new_marker_longitude = <%= @marker.longitude %>

clusterLayer.addLayer(L.marker([new_marker_latitude, new_marker_longitude], { icon: complaintIcon }).bindPopup("<%= @marker.description %>"))
clusterLayer.refreshClusters()

heatmapData.data.push({lat: new_marker_latitude, lng: new_marker_longitude, value: 1})
heatmapLayer.addData({lat: new_marker_latitude, lng: new_marker_longitude, value: 1})

address_field.value = ""
latitude_field.value = ""
longitude_field.value = ""
noise_type_field.value = 1
description_field.value = ""

sidebar.close()